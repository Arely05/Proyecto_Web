<app-navbar></app-navbar>

<div class="page">
  <h2>Resumen y Pago</h2>

  <div *ngIf="!paid">
    
    <div *ngIf="items.length > 0; else emptyCart">
      <ul>
        <li *ngFor="let item of items">
          {{ item.product.name }} ({{ item.quantity }} x {{ item.product.price | currency:'MXN' }})
        </li>
      </ul>
      <hr>

      <div class="summary-details">
        <div class="summary-item">
          <span>Subtotal:</span>
          <span>{{ subtotal() | currency:'MXN' }}</span>
        </div>
        <div class="summary-item">
          <span>IVA (16%):</span>
          <span>{{ iva() | currency:'MXN' }}</span>
        </div>
        <div class="summary-item total">
          <strong>Total:</strong>
          <strong>{{ total() | currency:'MXN' }}</strong>
        </div>
      </div>
      
      <div *ngIf="payPalConfig" class="paypal-container">
        <ngx-paypal [config]="payPalConfig"></ngx-paypal>
      </div>
    </div>

    <ng-template #emptyCart>
      <p>Tu carrito está vacío. ¡Añade productos para poder pagar!</p>
    </ng-template>

  </div>

  <div *ngIf="paid" class="success-message">
    <h3>¡Gracias por tu compra!</h3>
    <p>Tu pago ha sido procesado exitosamente.</p>
  </div>

